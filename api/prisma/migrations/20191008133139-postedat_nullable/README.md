# Migration `20191008133139-postedat_nullable`

This migration has been generated by Rob Cameron at 10/8/2019, 1:31:39 PM.
You can check out the [state of the datamodel](./datamodel.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "lift"."new_Post" (
  "author" TEXT NOT NULL DEFAULT ''  ,
  "body" TEXT NOT NULL DEFAULT ''  ,
  "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT ,
  "image" TEXT    ,
  "postedAt" DATE    ,
  "slug" TEXT NOT NULL DEFAULT ''  ,
  "title" TEXT NOT NULL DEFAULT ''  
);

INSERT INTO "new_Post" ("author","body","id","image","postedAt","slug","title") SELECT "author","body","id","image","postedAt","slug","title" from "Post"

DROP TABLE "lift"."Post";

ALTER TABLE "lift"."new_Post" RENAME TO "Post";

CREATE UNIQUE INDEX "lift"."Post.slug" ON "Post"("slug")

PRAGMA "lift".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration 20190927144906-add-unique-constraints..20191008133139-postedat_nullable
--- datamodel.dml
+++ datamodel.dml
@@ -4,9 +4,9 @@
 }
 generator photonjs {
   provider = "photonjs"
-  output = "../generated/photon"
+  output = "../packages/photon"
 }
 // Define your own models here and run yarn db:save to create
 // migrations for them.
@@ -18,9 +18,9 @@
   author String
   body String
   image String?
   tags Tag[]
-  postedAt DateTime
+  postedAt DateTime?
 }
 model Tag {
   id Int @id
```

## Photon Usage

You can use a specific Photon built for this migration (20191008133139-postedat_nullable)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20191008133139-postedat_nullable'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
